<div class="bg-gray-800 p-6 rounded-lg shadow-md mb-6 border border-gray-700">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-bold text-white">Monthly Budget</h2>
    <div class="flex items-center gap-2">
      <span class="text-gray-300">Limit:</span>
      <input
        type="number"
        [(ngModel)]="budget"
        class="bg-gray-700 border border-gray-600 text-white rounded px-2 py-1 w-24 text-right focus:ring-2 focus:ring-blue-500"
      />
      <button (click)="updateBudget()" class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition-colors">
        Set
      </button>
    </div>
  </div>

  <div class="relative pt-1">
    <div class="flex mb-2 items-center justify-between">
      <div>
        <span class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full"
           [ngClass]="percentUsed > 100 ? 'text-red-400 bg-red-900' : 'text-white-400 bg-blue-900'">
          {{ percentUsed > 100 ? 'Over Budget' : 'On Track' }}
        </span>
      </div>
      <div class="text-right">
        <span class="text-xs font-semibold inline-block text-gray-400">
          {{ totalSpent | currency }} / {{ budget | currency }}
        </span>
      </div>
    </div>
    
    <!-- Gauge Bar -->
    <div class="overflow-hidden h-4 mb-4 text-xs flex rounded bg-gray-700">
      <div
        class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center transition-all duration-500"
        [style.width.%]="percentUsed > 100 ? 100 : percentUsed"
        [ngClass]="{
          'bg-green-500': percentUsed < 75,
          'bg-yellow-500': percentUsed >= 75 && percentUsed < 100,
          'bg-red-500': percentUsed >= 100
        }"
      ></div>
    </div>
    
    <p *ngIf="percentUsed > 100" class="text-red-400 text-sm font-bold text-center">
          ⚠️ You have exceeded your budget by {{ (percentUsed - 100) | number:'1.0-0' }}%!
    </p>
  </div>
</div>
