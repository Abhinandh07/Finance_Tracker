<div class="min-h-screen bg-gray-900 p-6">
  <div class="max-w-6xl mx-auto">
    <!-- Header -->
    <div class="mb-8">
      <h2 class="text-4xl font-bold text-white mb-4">üí∞ Loan Management</h2>
      
      <!-- Total Amount Card -->
      <div class="bg-gradient-to-r from-blue-900 to-blue-800 rounded-lg p-6 border border-blue-700 mb-6">
        <div class="text-gray-300 text-sm font-semibold">Total Pending Loan Amount</div>
        <div class="text-4xl font-bold text-white">${{ totalAmount.toFixed(2) }}</div>
      </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="mb-4 p-4 bg-red-900 border border-red-700 text-red-100 rounded-lg">
      {{ errorMessage }}
    </div>

    <!-- Filter Buttons -->
    <div class="flex gap-3 mb-6 flex-wrap">
      <button
        (click)="onFilterChange('all')"
        [class]="'px-6 py-2 rounded-lg font-semibold transition ' + (filterType === 'all' ? 'bg-green-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600')"
      >
        üìã All Loans
      </button>
      <button
        (click)="onFilterChange('pending')"
        [class]="'px-6 py-2 rounded-lg font-semibold transition ' + (filterType === 'pending' ? 'bg-green-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600')"
      >
        ‚è≥ Pending
      </button>
      <button
        (click)="onFilterChange('overdue')"
        [class]="'px-6 py-2 rounded-lg font-semibold transition ' + (filterType === 'overdue' ? 'bg-green-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600')"
      >
        ‚ö†Ô∏è Overdue
      </button>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-12">
      <p class="text-gray-400 text-lg">‚è≥ Loading loans...</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && loans.length === 0" class="text-center py-12">
      <p class="text-gray-400 text-lg">üì≠ No loans found</p>
    </div>

    <!-- Loans Table -->
    <div *ngIf="!loading && loans.length > 0" class="overflow-x-auto">
      <table class="w-full border-collapse">
        <thead>
          <tr class="bg-gray-800 border-b border-gray-700">
            <th class="px-6 py-4 text-left text-gray-300 font-semibold">Borrower</th>
            <th class="px-6 py-4 text-left text-gray-300 font-semibold">Phone</th>
            <th class="px-6 py-4 text-right text-gray-300 font-semibold">Amount</th>
            <th class="px-6 py-4 text-left text-gray-300 font-semibold">Due Date</th>
            <th class="px-6 py-4 text-left text-gray-300 font-semibold">Status</th>
            <th class="px-6 py-4 text-center text-gray-300 font-semibold">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let loan of loans" class="border-b border-gray-700 hover:bg-gray-800 transition">
            <!-- Borrower Name -->
            <td class="px-6 py-4 text-white font-medium">{{ loan.borrowerName }}</td>

            <!-- Phone -->
            <td class="px-6 py-4 text-gray-300">{{ loan.borrowerPhone }}</td>

            <!-- Amount -->
            <td class="px-6 py-4 text-right text-white font-bold">${{ loan.amount.toFixed(2) }}</td>

            <!-- Due Date -->
            <td class="px-6 py-4">
              <span [class]="'px-3 py-1 rounded-full text-sm font-semibold ' + (isOverdue(loan.dueDate) && loan.status !== 'returned' ? 'bg-red-900 text-red-100' : 'text-gray-300')">
                {{ formatDate(loan.dueDate) }}
              </span>
            </td>

            <!-- Status Badge -->
            <td class="px-6 py-4">
              <span [class]="'px-3 py-1 rounded-full text-sm font-semibold ' + getStatusColor(loan.status)">
                {{ getStatusLabel(loan.status) }}
              </span>
            </td>

            <!-- Actions -->
            <td class="px-6 py-4 text-center">
              <div class="flex gap-2 justify-center">
                <!-- Mark as Returned Button -->
                <button
                  *ngIf="loan.status !== 'returned'"
                  (click)="markAsReturned(loan.id)"
                  class="px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-semibold transition"
                  title="Mark as returned"
                >
                  ‚úÖ
                </button>

                <!-- Delete Button -->
                <button
                  (click)="deleteLoan(loan.id)"
                  class="px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-semibold transition"
                  title="Delete loan"
                >
                  üóëÔ∏è
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
